# 🎯 PlayEdu 高级数据库课程设计汇报 PPT 大纲 (Slide-by-Slide)
**总页数**：15-18 页
**预计时长**：8 分钟
**演讲模式**：组长开场 -> 成员轮流 -> 组长结辩

---

## 第一部分：开场与项目概览 (演讲人：组长)

### Slide 1: 封面
*   **主标题**：PlayEdu 企业级在线培训系统深度优化
*   **副标题**：高级数据库特性与云原生架构实践
*   **小组成员**：张三(组长/后端)，李四(DBA)，王五(数据)，赵六(安全)
*   **背景图**：系统首页大屏截图

### Slide 2: 项目背景与痛点 (为什么要改？)
*   **业务背景**：企业内部培训场景，需支撑 10万+ 学员，海量视频存储，高并发考试。
*   **原有系统痛点**：
    1.  **性能瓶颈**：学员层级深，递归查询慢；日志量大，检索卡顿。
    2.  **数据孤岛**：题目选项非结构化，难以统计分析。
    3.  **一致性差**：交卷后分数计算延迟，存在数据不一致风险。
    4.  **存储压力**：本地存储无法承载 TB 级教学视频。

### Slide 3: 整体技术架构图
*   **展示架构图**（分层结构）：
    *   **前端**：React + Ant Design Pro
    *   **后端**：Spring Boot + MyBatis Plus
    *   **数据库 (核心)**：MySQL 8.0 (JSON, CTE, Trigger, View)
    *   **中间件**：Redis (缓存), MinIO/OSS (对象存储)
    *   **部署**：Docker Compose 容器化

### Slide 4: 小组任务分工矩阵
*   **表格展示**：
    *   **成员 A**：题库设计与智能组卷 (JSON/SP)
    *   **成员 B**：成绩中心与数据分析 (Trigger/View)
    *   **成员 C**：课程资源与 OSS 集成 (Cloud/Transaction)
    *   **成员 D**：系统架构与安全 (Recursive/Fulltext)

---

## 第二部分：MySQL 8.0 高级特性应用 (演讲人：成员 A & B)

### Slide 5: 题库非结构化数据治理 (成员 A)
*   **核心问题**：题目选项（单选/多选/填空）结构多变，传统关系表难以适应。
*   **解决方案**：引入 **MySQL 8.0 JSON** 类型。
*   **技术亮点**：
    *   `options` 字段存储 JSON Array。
    *   使用 `JSON_EXTRACT` 和 `->>` 运算符进行深层检索。
    *   JSON 虚拟列索引 (Virtual Column Index) 提升查询效率。

### Slide 6: 数据库级智能组卷 (成员 A)
*   **核心问题**：后端随机抽题效率低，网络 IO 开销大。
*   **解决方案**：**存储过程 (Stored Procedure)** `sp_generate_quiz`。
*   **实现逻辑**：
    1.  开启事务。
    2.  `ORDER BY RAND()` 在数据库层随机排序。
    3.  批量插入关联表。
*   **成果**：组卷速度从 2s 提升至 0.05s。

### Slide 7: 成绩计算自动化 (成员 B)
*   **核心问题**：交卷操作涉及多表更新，应用层计算容易导致数据不一致。
*   **解决方案**：**触发器 (Trigger)** `trg_after_quiz_submit`。
*   **流程图**：
    *   学员插入交卷记录 -> [Trigger 被触发] -> 自动汇总得分 -> 回写主表 -> 级联更新统计报表。
*   **价值**：保证了数据的最终一致性 (Eventual Consistency)。

### Slide 8: 复杂报表与视图封装 (成员 B)
*   **核心问题**：前端展示一张成绩单需要 JOIN 5 张表 (User, Dept, Quiz, Record, Question)。
*   **解决方案**：**数据库视图 (View)** `v_transcript_full`。
*   **技术亮点**：
    *   预定义复杂连接语义。
    *   使用 `CASE WHEN` 动态计算及格状态。
    *   视图层直接对接导出接口，减少后端代码量。

---

## 第三部分：云原生与大事务实战 (演讲人：成员 C)

### Slide 9: 阿里云 OSS 深度集成方案 (成员 C)
*   **业务场景**：TB 级教学视频存储与分发。
*   **架构设计图** (时序图)：
    *   前端计算 MD5 -> 后端查库(秒传) -> 返回上传凭证 -> 前端直传 OSS -> 异步回报。
*   **核心优化**：
    *   **秒传**：利用文件 Hash 避免重复上传，节省 40% 带宽。
    *   **分片上传**：支持 5GB+ 大文件断点续传。

### Slide 10: 课程发布的大事务控制 (成员 C)
*   **核心问题**：发布课程涉及由 Course, Chapter, Hour, Resource 组成的复杂聚合根。
*   **解决方案**：Spring `@Transactional` + **级联删除存储过程**。
*   **ACID 演示**：
    *   演示当“第3步关联资源失败”时，第1、2步插入的数据自动回滚，确保数据库零脏数据。

---

## 第四部分：性能优化与安全底座 (演讲人：成员 D)

### Slide 11: 无限层级递归查询优化 (成员 D)
*   **核心问题**：查找“技术部”及其 10 层子部门下的所有员工。
*   **对比图**：
    *   **Old**: Java 递归调用，发送 10+ 次 SQL。
    *   **New**: MySQL 8.0 **CTE (With Recursive)**，1 次 SQL 搞定。
*   **代码片段**：展示 `WITH RECURSIVE dept_tree AS ...` 关键词。

### Slide 12: 百万级日志性能优化 (成员 D)
*   **优化手段 1：全文检索**
    *   对操作日志 `content` 字段建立 `FULLTEXT` 索引。
    *   搜索速度对比：`LIKE %xx%` (3.5s) vs `MATCH AGAINST` (0.02s)。
*   **优化手段 2：表分区 (Partitioning)**
    *   按年份 (`RANGE`) 对登录日志表进行物理分区，提升历史数据清理效率。

### Slide 13: 系统安全体系 (成员 D)
*   **数据脱敏**：用户手机号、身份证号在 DB 层脱敏存储。
*   **配置加密**：OSS AccessKey 使用 AES-256 加密入库。
*   **多级缓存**：热点配置加载至 Redis，减少 DB 压力 (Cache-Aside Pattern)。

---

## 第五部分：总结与答辩 (演讲人：组长)

### Slide 14: 系统演示 (Live Demo)
*   **(视频或动图)**
*   场景 1：拖拽上传大视频 (秒传效果)。
*   场景 2：一键生成试卷。
*   场景 3：数据大屏动态展示。

### Slide 15: 课程设计总结
*   **工作量统计**：重构表 15 张，新增存储过程 3 个，触发器 2 个，视图 4 个，Java 代码 3000+ 行。
*   **核心收获**：
    *   跳出了 CRUD 的舒适区。
    *   深刻理解了数据库“服务端编程”的威力。
    *   掌握了云存储与本地数据库的混合架构设计。

### Slide 16: Q&A 致谢
*   感谢聆听，欢迎提问。

---
> **💡 制送小贴士**：
> 1.  每一页 PPT 只需要放 **3-5 个 Bullet Points**，不要放大段文字。
> 2.  **多放图**：架构图、ER 图、时序图是加分项。
> 3.  **代码高亮**：如果放代码，请务必使用深色背景的代码截图，并用红框圈出重点关键字（如 `JSON`, `TRIGGER`, `RECURSIVE`）。
